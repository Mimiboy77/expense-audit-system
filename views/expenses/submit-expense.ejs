<%- include('../partials/header') %>
<%- include('../partials/navbar') %>

<div class="page-container">
  <h2>Submit New Expense</h2>

  <!-- Show error if submission fails e.g budget exceeded -->
  <% if (error) { %>
    <div class="alert alert-error"><%= error %></div>
  <% } %>

  <!-- enctype must be multipart/form-data for file uploads to work -->
  <form action="/expenses" method="POST" enctype="multipart/form-data">

    <div class="form-group">
      <label for="category">Category</label>
      <input
        type="text"
        id="category"
        name="category"
        placeholder="e.g. Travel, Supplies, Utilities"
        required
      />
    </div>

    <div class="form-group">
      <label for="amount">Amount (₦)</label>
      <input
        type="number"
        id="amount"
        name="amount"
        placeholder="Enter amount in Naira"
        min="1"
        required
      />
    </div>

    <div class="form-group">
      <label for="month">Month</label>
      <select id="month" name="month" required>
        <option value="">Select month</option>
        <% const months = [
          "January","February","March","April","May","June",
          "July","August","September","October","November","December"
        ];
        months.forEach((m, i) => { %>
          <option value="<%= i + 1 %>"><%= m %></option>
        <% }) %>
      </select>
    </div>

    <div class="form-group">
      <label for="year">Year</label>
      <input
        type="number"
        id="year"
        name="year"
        value="<%= new Date().getFullYear() %>"
        min="2020"
        required
      />
    </div>

    <div class="form-group">
      <label for="receipt">Receipt (JPEG, PNG or PDF — max 5MB)</label>
      <input
        type="file"
        id="receipt"
        name="receipt"
        accept=".jpg,.jpeg,.png,.pdf"
      />
    </div>

    <button type="submit" class="btn-primary">Submit Expense</button>
  </form>

  <a href="/expenses" class="btn-secondary">← Cancel</a>
</div>

<%- include('../partials/footer') %>